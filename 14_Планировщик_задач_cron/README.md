# cron

**Cron** — это системный демон (фоновая служба) в Linux для автоматического выполнения задач по расписанию. Работает как "виртуальный помощник", который запускает команды и скрипты в указанное время без ручного вмешательства.  

**Crontab** — это конфигурационный файл, где хранятся правила выполнения задач. Каждый пользователь системы имеет свою собственную crontab.

## Формат записи заданий

```sh
# Редактирование заданий текущего пользователя
crontab -e

# Просмотр текущих заданий
crontab -l

# Удаление всех заданий
crontab -r
```

Откроется редактор, где можно добавлять строки с новыми заданиями. После сохранения изменений расписание начнёт действовать немедленно.

Запись в crontab состоит из пяти полей времени и шестого поля с командой:
```text
минуты(0-59) часы(0-23) день_месяца(1-31) месяц(1-12) день_недели(0-7) команда
```

Специальные символы:  
- `* `- любое значение  
- `*/n` - каждые n единиц времени  
- `a-b` - диапазон от a до b  
- `a,b,c` - конкретные значения 
 
Cron поддерживает удобные псевдонимы для частых интервалов:  
```sh
@reboot    # При загрузке системы
@hourly    # Каждый час (0 * * * *)
@daily     # Ежедневно (0 0 * * *)
@weekly    # Еженедельно (0 0 * * 0)
@monthly   # Ежемесячно (0 0 1 * *)
@yearly    # Ежегодно (0 0 1 1 *)
```

## Рекомендации

- **Отслеживание выполнения** — регулярно проверяйте системные логи для мониторинга работы запланированных заданий

- **Абсолютные адреса** — используйте полные пути к программам и скриптам, поскольку cron имеет ограниченное окружение

- **Предварительная проверка**— тестируйте команды вручную перед добавлением в расписание

- **Права доступа** — учитывайте разрешения файлов и каталогов для пользователя, от которого запускается задача

```sh
# Логирование для отладки
tail -f /var/log/syslog | grep cron

# Полный путь к скрипту
0 * * * * /usr/local/bin/backup.sh

# Предварительный тест
/path/to/your/script.sh

# Проверка прав
ls -l /path/to/script.sh
chmod +x /path/to/script.sh
```

## Примеры

### Пример 1: Ежедневная очистка временных файлов

```sh
# Выполняется каждый день в 00:00
0 0 * * * rm -rf /tmp/*
# Альтернатива с ключевым словом
@daily rm -rf /tmp/*
```

### Пример 2: Еженедельное обновление системы

```sh
# Каждое воскресенье в 6:30 утра
30 6 * * 0 apt update && apt upgrade -y
# Альтернативная запись
@weekly apt update && apt upgrade -y
```

