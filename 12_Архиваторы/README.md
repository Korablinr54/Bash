# tar

tar (tape archive) - архиватор. Изначально создавался как инструмент для резервного копирования.  


Основные ключи:  
- `c` — создать архив
- `x` — извлечь файлы из архива
- `v` — подробный вывод
- `z, j, J` — тип сжатия gzip, bzip2, xz
- `f` — присвоить имя
- `t` — просмотр содержимого архива

## Создание архива

Важно! Опции всегда должны пыть переданы до названий файлов или путей!  
`Порядок tar [ОПЦИИ] [ПУТЬ/БУДУЩИЙ_ФАЙЛ_АРХИВА] [ФАЙЛЫ_ДЛЯ_АРХИВАЦИИ]`
Давайте создадим архив.
```sh
# архива нет, только файл
root@633916c9fb8a:/archive_test# ls
file.txt

# создаем архив
root@633916c9fb8a:/archive_test# tar -czvf archive.tar.gz ./file.txt
./
./file.txt
tar: .: file changed as we read it

# теперь есть архив и файл
root@633916c9fb8a:/archive_test# ls
archive.tar.gz  file.txt
```
* `tar` - вызов утилиты
* `с` - создать архив
* `z` - указан тип сжатия gzip
* `v` - выводить подробную информацию о процессе
* `f` - указать ия архива archive.tar.gz
* `./file.txt` - поместить в текущей директории

Для создания архивая не в текущей папке а в любой другой:
```sh
# проверяем список файлов 
root@633916c9fb8a:/archive_test# ls
file.txt

# создаем тестовую папку
root@633916c9fb8a:/archive_test# mkdir archive_test

# создаем архив
root@633916c9fb8a:/archive_test# tar -czvf ./archive_test/arc.tar.gz file.txt 
file.txt

# проверяем наличие архива
root@633916c9fb8a:/archive_test# ls archive_test/
arc.tar.gz
```

* `tar -czvf` - вызов утилиты с ключами
* `./archive_test/arc.tar.gz` - куда сохраняем архив с его именем
* `file.txt` - что архивируем, можно также указать путь

| Метод сжатия | Ключ | Степень сжатия |
|-------------|------|----------------|
| gzip        | `-z` | Средняя        |
| bzip2       | `-j` | Хорошая        |
| xz          | `-J` | Отличная       |

## Просмотр содержимого архива 
```sh
root@633916c9fb8a:/archive_test# ls
archive_test  file.txt
root@633916c9fb8a:/archive_test# tar -tf archive_test/arc.tar.gz 

# вывод
file.txt
```

## Распаковка архива
`tar [ОПЦИИ] [ПУТЬ/СУЩЕСТВУЮЩИЙ_АРХИВ] [КУДА_РАСПАКОВАТЬ]`

Распакуем наш арив в новую папку.  
```sh
root@d6d18a1f292e:/test_arc_folder# tar -xvf /pack/arch.tar.gz -C /test_arc_folder/unpack/

# вывод
./file.txt
```

- `tar -xvf` вызов утилиты с ключами -x ля распаковки файла, -v подробный  результат и -f для использования имени  
- `/pack/arch.tar.gz` - сам архив лежит по этому пути  
- `-C` для распаковки в другую директорию используем этот ключ  
- `test_arc_folder/unpack/` - укажем место для распаковки  

# zip

Кросс-платформенный формат архивации данных.  

## Создание архива 

| Ключ | Описание |
|------|----------|
| `-r` | Рекурсивное архивирование директорий |
| `-9` | Максимальное сжатие |
| `-0` | Без сжатия (только упаковка) |
| `-e` | Зашифровать архив паролем |
| `-v` | Подробный вывод |
| `-q` | Тихий режим (без вывода) |
| `-u` | Обновить существующий архив |
| `-d` | Удалить файлы из архива |

Создадим zip-архив
```sh
root@d6d18a1f292e:/# mkdir TEST
root@d6d18a1f292e:/# cd TEST/
root@d6d18a1f292e:/TEST# mkdir -p level_1/level_2/lever_3
root@d6d18a1f292e:/TEST# touch level_1/level_2/lever_3/file.txt
root@d6d18a1f292e:/TEST# zip arch.zip -r0v level_1/   

# вывод
root@d6d18a1f292e:/TEST# zip arch.zip -r0v level_1/
  adding: level_1/      (in=0) (out=0) (stored 0%)
  adding: level_1/level_2/      (in=0) (out=0) (stored 0%)
  adding: level_1/level_2/lever_3/      (in=0) (out=0) (stored 0%)
  adding: level_1/level_2/lever_3/file.txt      (in=0) (out=0) (stored 0%)
total bytes=0, compressed
```

Теперь распакуем его в другую папку.
| Ключ | Описание |
|------|----------|
| `-l` | Показать содержимое архива |
| `-v` | Подробный просмотр содержимого |
| `-d` | Распаковать в указанную директорию |
| `-o` | Перезаписать существующие файлы |
| `-n` | Не перезаписывать существующие файлы |
| `-P` | Указать пароль (небезопасно) |

```sh

```
